<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Order.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">backend</a> &gt; <a href="index.source.html" class="el_package">com.ecomarket.order</a> &gt; <span class="el_source">Order.java</span></div><h1>Order.java</h1><pre class="source lang-java linenums">package com.ecomarket.order;

import java.math.BigDecimal;
import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.List;

import com.ecomarket.auth.User;

import jakarta.persistence.CascadeType;
import jakarta.persistence.Entity;
import jakarta.persistence.EnumType;
import jakarta.persistence.Enumerated;
import jakarta.persistence.FetchType;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;
import jakarta.persistence.Id;
import jakarta.persistence.JoinColumn;
import jakarta.persistence.ManyToOne;
import jakarta.persistence.OneToMany;
import jakarta.persistence.Table;

@Entity
@Table(name = &quot;orders&quot;)
public class Order {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;user_id&quot;, nullable = false)
    private User user;

<span class="pc" id="L35">    @OneToMany(mappedBy = &quot;order&quot;, cascade = CascadeType.ALL, orphanRemoval = true)</span>
    private List&lt;OrderItem&gt; orderItems = new ArrayList&lt;&gt;();

    private BigDecimal totalAmount;

    @Enumerated(EnumType.STRING)
    private OrderStatus status;

    private String shippingAddress;
    private String billingAddress;
    private String notes;

    private LocalDateTime createdAt;
    private LocalDateTime updatedAt;

<span class="fc" id="L50">    public Order() {}</span>

<span class="nc" id="L52">    public Order(User user, List&lt;OrderItem&gt; orderItems, BigDecimal totalAmount, OrderStatus status, String shippingAddress, String billingAddress, String notes) {</span>
<span class="nc" id="L53">        this.user = user;</span>
<span class="nc bnc" id="L54" title="All 2 branches missed.">        this.orderItems = orderItems != null ? orderItems : new ArrayList&lt;&gt;();</span>
<span class="nc" id="L55">        this.totalAmount = totalAmount;</span>
<span class="nc" id="L56">        this.status = status;</span>
<span class="nc" id="L57">        this.shippingAddress = shippingAddress;</span>
<span class="nc" id="L58">        this.billingAddress = billingAddress;</span>
<span class="nc" id="L59">        this.notes = notes;</span>
<span class="nc" id="L60">        this.createdAt = LocalDateTime.now();</span>
<span class="nc" id="L61">        this.updatedAt = LocalDateTime.now();</span>
<span class="nc" id="L62">    }</span>

    // Getters and setters
<span class="nc" id="L65">    public Long getId() { return id; }</span>
<span class="nc" id="L66">    public void setId(Long id) { this.id = id; }</span>

<span class="nc" id="L68">    public User getUser() { return user; }</span>
<span class="nc" id="L69">    public void setUser(User user) { this.user = user; }</span>

<span class="nc" id="L71">    public List&lt;OrderItem&gt; getOrderItems() { return orderItems; }</span>
<span class="nc" id="L72">    public void setOrderItems(List&lt;OrderItem&gt; orderItems) { this.orderItems = orderItems; }</span>

<span class="nc" id="L74">    public BigDecimal getTotalAmount() { return totalAmount; }</span>
<span class="nc" id="L75">    public void setTotalAmount(BigDecimal totalAmount) { this.totalAmount = totalAmount; }</span>

<span class="nc" id="L77">    public OrderStatus getStatus() { return status; }</span>
<span class="nc" id="L78">    public void setStatus(OrderStatus status) { this.status = status; }</span>

<span class="nc" id="L80">    public String getShippingAddress() { return shippingAddress; }</span>
<span class="nc" id="L81">    public void setShippingAddress(String shippingAddress) { this.shippingAddress = shippingAddress; }</span>

<span class="nc" id="L83">    public String getBillingAddress() { return billingAddress; }</span>
<span class="nc" id="L84">    public void setBillingAddress(String billingAddress) { this.billingAddress = billingAddress; }</span>

<span class="nc" id="L86">    public String getNotes() { return notes; }</span>
<span class="nc" id="L87">    public void setNotes(String notes) { this.notes = notes; }</span>

<span class="nc" id="L89">    public LocalDateTime getCreatedAt() { return createdAt; }</span>
<span class="nc" id="L90">    public void setCreatedAt(LocalDateTime createdAt) { this.createdAt = createdAt; }</span>

<span class="nc" id="L92">    public LocalDateTime getUpdatedAt() { return updatedAt; }</span>
<span class="nc" id="L93">    public void setUpdatedAt(LocalDateTime updatedAt) { this.updatedAt = updatedAt; }</span>

    // Helper methods
    public void addOrderItem(OrderItem item) {
<span class="nc" id="L97">        orderItems.add(item);</span>
<span class="nc" id="L98">        item.setOrder(this);</span>
<span class="nc" id="L99">    }</span>

    public void removeOrderItem(OrderItem item) {
<span class="nc" id="L102">        orderItems.remove(item);</span>
<span class="nc" id="L103">        item.setOrder(null);</span>
<span class="nc" id="L104">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>